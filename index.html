<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Produtos</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            width: 80%;
            margin: 0 auto;
        }
        .product-form {
            margin: 20px 0;
        }
        .product-form input {
            margin: 5px;
            padding: 8px;
        }
        .product-list {
            margin-top: 20px;
        }
        .product-item {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ccc;
            display: flex;
            justify-content: space-between;
        }
        .countdown {
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Cadastro de Produtos Próximos de Vencimento</h1>

        <!-- Formulário de Cadastro -->
        <div class="product-form">
            <input type="text" id="nome" placeholder="Nome do Produto" required>
            <input type="number" id="quantidade" placeholder="Quantidade" required>
            <input type="date" id="validade" required>
            <button onclick="adicionarProduto()">Adicionar Produto</button>
        </div>

        <!-- Lista de Produtos -->
        <div class="product-list">
            <h2>Produtos Próximos de Vencimento:</h2>
            <div id="listaProdutos"></div>
        </div>
    </div>

    <script>
        // Função para calcular a contagem regressiva
        function calcularContagemRegressiva(dataValidade) {
            const agora = new Date();
            const validade = new Date(dataValidade);
            const tempoRestante = validade - agora;
            const diasRestantes = Math.floor(tempoRestante / (1000 * 60 * 60 * 24));
            return diasRestantes;
        }

        // Função para adicionar produto
        function adicionarProduto() {
            const nome = document.getElementById("nome").value;
            const quantidade = document.getElementById("quantidade").value;
            const validade = document.getElementById("validade").value;

            if (nome && quantidade && validade) {
                const produtos = JSON.parse(localStorage.getItem("produtos")) || [];
                const produto = {
                    nome,
                    quantidade,
                    validade,
                };

                produtos.push(produto);
                localStorage.setItem("produtos", JSON.stringify(produtos));
                atualizarLista();
                limparCampos();
            } else {
                alert("Por favor, preencha todos os campos.");
            }
        }

        // Função para atualizar a lista de produtos
        function atualizarLista() {
            const listaProdutos = document.getElementById("listaProdutos");
            listaProdutos.innerHTML = "";

            const produtos = JSON.parse(localStorage.getItem("produtos")) || [];

            produtos.forEach((produto, index) => {
                const diasRestantes = calcularContagemRegressiva(produto.validade);

                const divProduto = document.createElement("div");
                divProduto.classList.add("product-item");

                divProduto.innerHTML = `
                    <span>${produto.nome} - ${produto.quantidade} unidades</span>
                    <span class="countdown">Vence em: ${diasRestantes} dias</span>
                    <button onclick="excluirProduto(${index})">Excluir</button>
                `;
                listaProdutos.appendChild(divProduto);
            });
        }

        // Função para excluir um produto
        function excluirProduto(index) {
            const produtos = JSON.parse(localStorage.getItem("produtos")) || [];
            produtos.splice(index, 1);
            localStorage.setItem("produtos", JSON.stringify(produtos));
            atualizarLista();
        }

        // Função para limpar os campos do formulário
        function limparCampos() {
            document.getElementById("nome").value = "";
            document.getElementById("quantidade").value = "";
            document.getElementById("validade").value = "";
        }

        // Atualizar a lista de produtos quando a página for carregada
        window.onload = atualizarLista;
    </script>

</body>
</html>
